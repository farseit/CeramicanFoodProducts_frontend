(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8924,5141,652],{88326:function(e,t,r){Promise.resolve().then(r.bind(r,77107))},77107:function(e,t,r){"use strict";r.d(t,{default:function(){return f}});var l=r(57437),a=r(2265),n=r(91326),s=r(20124),o=r(23051),i=r(72107),d=r(11444),u=r(66648),c=r(64379),m=r.n(c),g=r(38472),p=r(84894),f=e=>{let{params:t}=e,r=function(){let[e,t]=(0,a.useState)(()=>window.innerWidth);return(0,a.useEffect)(()=>{function e(){t(window.innerWidth)}return window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e)}},[]),e}(),{currentUser:c}=(0,d.v9)(e=>e.user),[f,x]=a.useState(r>=1280),[h,w]=a.useState(c.Image),[y,b]=a.useState(!1),j=(0,d.I0)();a.useEffect(()=>{r>=1280?x(!0):x(!1)},[r]);let v=async e=>{j((0,p.kv)());let t=e.target.files[0];if(t)try{let e=await (0,i.Z)(t,{maxSizeMB:.1,maxWidthOrHeight:1024,useWebWorker:!0}),r=new File([e],t.name,{type:t.type}),l=new FileReader;l.onload=e=>{w(e.target.result)},l.readAsDataURL(r);let a=new FormData;a.append("ProfilePicture",r);let n=await g.Z.put("".concat("https://testingbackend.ceramicandfoodproducts.com","/user/ChangeProfilePicture/").concat(c.Id),a);200===n.status&&(j((0,p.Uw)(n.data)),m().fire({icon:"success",title:"Image Updated!",text:"Profile picture uploaded successfully.",confirmButtonColor:"#3085d6",timer:2e3,timerProgressBar:!0}))}catch(e){var r,l;console.error(e),j((0,p.jp)(e.message)),m().fire({icon:"error",title:"Upload Failed!",text:(null==e?void 0:null===(l=e.response)||void 0===l?void 0:null===(r=l.data)||void 0===r?void 0:r.message)||e.message||"An error occurred.",confirmButtonColor:"#d33"})}};a.useEffect(()=>{},[h]);let N=async e=>{e.preventDefault(),j((0,p.kv)());let t=new FormData;t.append("name",e.target.name.value),t.append("address",e.target.address.value),t.append("phone",e.target.phone.value),console.log("data",t);try{let e=await g.Z.put("".concat("https://testingbackend.ceramicandfoodproducts.com","/user/profile/edit/").concat(c.Id),t,{headers:{"Content-Type":"application/json"}});200===e.status&&(j((0,p.Uw)(e.data)),m().fire({icon:"success",title:"Success!",text:"Profile updated successfully.",confirmButtonColor:"#3085d6",timer:2e3,timerProgressBar:!0})),b(!1)}catch(e){var r,l;j((0,p.jp)()),m().fire({icon:"error",title:"Oops...",text:(null==e?void 0:null===(l=e.response)||void 0===l?void 0:null===(r=l.data)||void 0===r?void 0:r.message)||"Something went wrong!",confirmButtonColor:"#d33"})}};return(0,l.jsxs)(n.Z,{sx:{display:"flex",position:"relative"},children:[(0,l.jsx)(s.ZP,{}),(0,l.jsxs)(n.Z,{component:"main",sx:{},children:[(0,l.jsx)("p",{className:"text-xl font-semibold ",children:"Personal Information"}),(0,l.jsxs)("form",{className:"w-full h-full flex lg:flex-row flex-col gap-8 items-center justify-center",onSubmit:N,children:[(0,l.jsxs)("div",{className:"lg:w-[30%] flex flex-col items-center gap-4",children:[(0,l.jsx)("div",{className:"max-h-[10rem] lg:max-h-[12rem] min-h-[8rem] lg:min-h-[10rem] max-w-[10rem] lg:max-w-[12rem] min-w-[8rem] lg:min-w-[10rem] border-4 rounded-full overflow-hidden flex items-center justify-center bg-gray-200",children:(0,l.jsx)(u.default,{src:h,height:170,width:170,className:"object-cover",alt:"User picture"})}),(0,l.jsx)("input",{className:"hidden",id:"imageChange",type:"file",onChange:v}),(0,l.jsx)("button",{onClick:e=>{e.preventDefault(),document.getElementById("imageChange").click()},className:"mt-2 bg-dash-primary hover:bg-blue-600 text-white rounded-full p-2",children:(0,l.jsx)(o.ggF,{size:20})})]}),(0,l.jsxs)("div",{className:"lg:w-[70%] w-full lg:px-10 px-4 flex flex-col gap-6",children:[(0,l.jsxs)("div",{className:"flex w-full  gap-4",children:[(0,l.jsx)("label",{htmlFor:"name",className:"w-[30%] text-lg font-medium text-gray-700",children:"Name"}),(0,l.jsx)("input",{type:"text",name:"name",className:"w-[70%] py-2 px-4 rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-500",defaultValue:c.name})]}),(0,l.jsxs)("div",{className:"flex w-full gap-4",children:[(0,l.jsx)("label",{htmlFor:"email",className:"w-[30%] text-lg font-medium text-gray-700",children:"Email"}),(0,l.jsx)("input",{type:"text",className:"w-[70%] py-2 px-4 rounded-lg border border-gray-300 bg-gray-100 text-gray-500 cursor-not-allowed",defaultValue:c.email,disabled:!0})]}),(0,l.jsxs)("div",{className:"flex w-full gap-4",children:[(0,l.jsx)("label",{htmlFor:"address",className:"w-[30%] text-lg font-medium text-gray-700",children:"Address"}),(0,l.jsx)("input",{type:"text",name:"address",className:"w-[70%] py-2 px-4 rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-500",defaultValue:c.address})]}),(0,l.jsxs)("div",{className:"flex w-full gap-4",children:[(0,l.jsx)("label",{htmlFor:"phone",className:"w-[30%] text-lg font-medium text-gray-700",children:"Phone"}),(0,l.jsx)("input",{type:"text",name:"phone",className:"w-[70%] py-2 px-4 rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-500",defaultValue:c.phone})]}),(0,l.jsxs)("div",{className:"flex w-full gap-4",children:[(0,l.jsx)("label",{htmlFor:"role",className:"w-[30%] text-lg font-medium text-gray-700",children:"Role"}),(0,l.jsx)("input",{type:"text",className:"w-[70%] py-2 px-4 rounded-lg border border-gray-300 bg-gray-100 text-gray-500 cursor-not-allowed",defaultValue:c.role,disabled:!0})]}),(0,l.jsxs)("div",{className:"flex w-full gap-4",children:[(0,l.jsx)("label",{htmlFor:"joined",className:"w-[30%] text-lg font-medium text-gray-700",children:"Joined"}),(0,l.jsx)("input",{type:"text",className:"w-[70%] py-2 px-4 rounded-lg border border-gray-300 bg-gray-100 text-gray-500 cursor-not-allowed",defaultValue:new Date(c.registration_date).toISOString().split("T")[0],disabled:!0})]}),y&&(0,l.jsx)("button",{className:"mt-6 bg-blue-500 hover:bg-blue-600 text-white py-2 px-6 rounded-lg",type:"submit",children:"Update"})]})]})]}),!y&&(0,l.jsx)("button",{className:"absolute top-10 right-10 bg-dash-primary px-2 py-1 rounded-md text-white",onClick:()=>b(!0),children:"Edit Info"})]})}},84894:function(e,t,r){"use strict";r.d(t,{Dl:function(){return g},Uw:function(){return c},jp:function(){return m},kv:function(){return u}});let l=(0,r(81904).oM)({name:"user",initialState:{currentUser:null,error:null,loading:!1},reducers:{SignInStart:e=>{e.loading=!0,e.error=null},SignInSuccess:(e,t)=>{e.currentUser=t.payload,e.loading=!1,e.error=null},SignInFailure:(e,t)=>{e.loading=!1,e.error=t.payload},RegisterStart:e=>{e.loading=!0,e.error=null},RegisterSuccess:(e,t)=>{e.currentUser=t.payload,e.loading=!1,e.error=null},RegisterFailure:(e,t)=>{e.loading=!1,e.error=t.payload},UpdateProfileStart:e=>{e.loading=!0,e.error=null},UpdateProfileSuccess:(e,t)=>{e.currentUser={...e.currentUser,...t.payload},e.loading=!1,e.error=null},UpdateProfileFailure:(e,t)=>{e.loading=!1,e.error=t.payload},LogOutUser:(e,t)=>{e.currentUser=null}}}),{SignInStart:a,SignInFailure:n,SignInSuccess:s,RegisterStart:o,RegisterSuccess:i,RegisterFailure:d,UpdateProfileStart:u,UpdateProfileSuccess:c,UpdateProfileFailure:m,LogOutUser:g}=l.actions;t.ZP=l.reducer}},function(e){e.O(0,[9461,522,4047,8472,8173,1444,1904,856,2971,7023,1744],function(){return e(e.s=88326)}),_N_E=e.O()}]);