(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6520],{15945:function(e,t,s){Promise.resolve().then(s.bind(s,68404))},68404:function(e,t,s){"use strict";s.r(t);var n=s(57437),a=s(2265),r=s(38472),i=s(16463);t.default=()=>{let e=(0,i.useRouter)(),[t,s]=(0,a.useState)(""),[l,d]=(0,a.useState)(""),[c,o]=(0,a.useState)(!1),[u,m]=(0,a.useState)(""),[h,x]=(0,a.useState)(""),[p,f]=(0,a.useState)(!1),[b,g]=(0,a.useState)(!1),[v,y]=(0,a.useState)(null),w=async e=>{if(e.preventDefault(),m(""),!t.includes("@")){m("Please enter a valid email.");return}try{var s,n;f(!0);let e=await r.Z.post("".concat("https://testingbackend.ceramicandfoodproducts.com","/EmailOTP/forgetPassword"),{email:t},{headers:{"Content-Type":"application/json"},withCredentials:!0});(null===(s=e.data)||void 0===s?void 0:s.success)?(o(!0),y(e.data.userId)):m((null===(n=e.data)||void 0===n?void 0:n.message)||"Failed to send OTP.")}catch(e){m("Something went wrong.")}finally{f(!1)}},j=async()=>{if(x(""),6!==l.length){x("OTP must be 6 digits.");return}try{var s,n;g(!0);let a=await r.Z.post("".concat("https://testingbackend.ceramicandfoodproducts.com","/EmailOTP/check"),{email:t,otp:l},{headers:{"Content-Type":"application/json"}});if(null===(s=a.data)||void 0===s?void 0:s.success){let t=a.data.userId||v;e.push("/User/newPassword/".concat(t))}else x((null===(n=a.data)||void 0===n?void 0:n.message)||"Invalid OTP.")}catch(e){x("Something went wrong while verifying OTP.")}finally{g(!1)}};return(0,n.jsx)("section",{className:"min-h-screen flex items-center justify-center bg-gray-100 px-4",children:(0,n.jsxs)("div",{className:"bg-white p-8 rounded shadow-md w-full max-w-md",children:[(0,n.jsx)("h2",{className:"text-2xl font-bold mb-4 text-center",children:"Forgot Password"}),(0,n.jsx)("p",{className:"text-center text-gray-600 mb-6",children:"Enter your email to receive a verification code."}),(0,n.jsxs)("form",{onSubmit:w,children:[(0,n.jsx)("input",{type:"email",placeholder:"Enter your email",className:"w-full border px-4 py-2 rounded-md mb-3",value:t,onChange:e=>s(e.target.value)}),u&&(0,n.jsx)("p",{className:"text-red-500 text-sm mb-2",children:u}),(0,n.jsx)("button",{type:"submit",disabled:p,className:"bg-[#2FB261] w-full text-white font-semibold py-2 px-4 rounded-md hover:bg-[#248b4c] transition",children:p?"Sending OTP...":"Send OTP"})]}),c&&(0,n.jsxs)("div",{className:"mt-6 border-t pt-4",children:[(0,n.jsx)("h3",{className:"text-lg font-semibold mb-2 text-center",children:"Verify OTP"}),(0,n.jsxs)("p",{className:"text-sm text-gray-600 text-center mb-3",children:["Enter the 6-digit code sent to ",(0,n.jsx)("b",{children:t})]}),(0,n.jsx)("input",{type:"text",value:l,onChange:e=>d(e.target.value.replace(/\D/g,"").slice(0,6)),maxLength:6,className:"w-full px-4 py-2 border text-center rounded-md text-xl tracking-widest mb-2",placeholder:"123456"}),h&&(0,n.jsx)("p",{className:"text-red-500 text-sm text-center",children:h}),(0,n.jsx)("div",{className:"flex justify-center mt-4",children:(0,n.jsx)("button",{type:"button",onClick:j,disabled:b,className:"bg-[#2FB261] text-white px-6 py-2 rounded hover:bg-[#248b4c]",children:b?"Verifying...":"Verify OTP"})})]})]})})}},16463:function(e,t,s){"use strict";var n=s(71169);s.o(n,"usePathname")&&s.d(t,{usePathname:function(){return n.usePathname}}),s.o(n,"useRouter")&&s.d(t,{useRouter:function(){return n.useRouter}}),s.o(n,"useServerInsertedHTML")&&s.d(t,{useServerInsertedHTML:function(){return n.useServerInsertedHTML}})}},function(e){e.O(0,[8472,2971,7023,1744],function(){return e(e.s=15945)}),_N_E=e.O()}]);