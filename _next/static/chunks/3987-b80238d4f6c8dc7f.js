"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3987],{3987:function(e,r,t){t.r(r),t.d(r,{default:function(){return Z}});var n=t(57437),s=t(2265),l=t(38472);t(45599),t(85072);var a=t(48024),o=t(48367),d=t(58292),c=t(87116),i=t(91326),h=t(80511),x=t(92674),m=t(28027),u=t(86645),b=t(74691),g=t(68884);let j=(0,a.ZP)(o.Z)(e=>{let{theme:r}=e;return{["&.".concat(d.Z.head)]:{color:r.palette.common.white},["&.".concat(d.Z.body)]:{fontSize:14}}}),p=(0,a.ZP)(c.Z)(e=>{let{theme:r}=e;return{"&:nth-of-type(odd)":{backgroundColor:r.palette.action.hover}}});var f=e=>{let{productsData:r}=e,[t,l]=(0,s.useState)(r);return(0,n.jsx)(i.Z,{sx:{overflowY:"auto"},children:0===t.length?(0,n.jsx)(h.Z,{variant:"h6",align:"center",sx:{padding:4,color:"gray"},children:"You have no orders yet."}):(0,n.jsx)(x.Z,{sx:{width:"100%",overflow:"auto"},component:m.Z,className:"!rounded-none",children:(0,n.jsxs)(u.Z,{"aria-label":"simple table",children:[(0,n.jsx)(b.Z,{className:"bg-dash-primary",children:(0,n.jsxs)(c.Z,{children:[(0,n.jsx)(j,{align:"center",className:"font-semibold text-xl border-r border-white",children:"Order ID"}),(0,n.jsx)(j,{align:"center",className:"font-semibold text-xl border-r border-white",children:"Product Name"}),(0,n.jsx)(j,{align:"center",className:"font-semibold text-xl border-r border-white",children:"Price"}),(0,n.jsx)(j,{align:"center",className:"font-semibold text-xl",children:"Date"}),(0,n.jsx)(j,{align:"center",className:"font-semibold text-xl",children:"Status"})]})}),(0,n.jsx)(g.Z,{children:t.map(e=>{var r;return(0,n.jsxs)(p,{children:[(0,n.jsx)(j,{component:"th",scope:"row",className:"border-r border-r-gray-200",children:(0,n.jsxs)("span",{className:"font-medium text-dash-primary",children:["#00",e.Id]})}),(0,n.jsx)(j,{align:"center",className:"border-r border-r-gray-200",children:null==e?void 0:null===(r=e.products)||void 0===r?void 0:r.map((r,t)=>(0,n.jsxs)("span",{children:[r.name,t<e.products.length-1&&", "]},t))}),(0,n.jsx)(j,{align:"center",children:(0,n.jsxs)("span",{children:["$",(Number(null==e?void 0:e.totalAmount)||0).toFixed(2)]})}),(0,n.jsx)(j,{align:"center",children:new Date(null==e?void 0:e.date).toLocaleDateString()}),(0,n.jsx)(j,{align:"center",children:e.status||"Pending"})]},e.id)})})]})})})},v=t(40468),N=t(11444),Z=()=>{let[e,r]=(0,s.useState)(0),[t,a]=(0,s.useState)([]),[o,d]=(0,s.useState)(5),[c,i]=(0,s.useState)(1),[h,x]=(0,s.useState)(!0),[m,u]=(0,s.useState)(null),{currentUser:b}=(0,N.v9)(e=>e.user);return((0,s.useEffect)(()=>{(async()=>{try{let e=(await l.Z.get("".concat("https://testingbackend.ceramicandfoodproducts.com","/Order/user/").concat(null==b?void 0:b.Id))).data;r(e.length);let t=e.slice((c-1)*o,c*o);a(t)}catch(e){console.error("Error fetching data:",e),u("An error occurred while fetching the data.")}finally{x(!1)}})()},[c]),h)?(0,n.jsxs)("div",{className:"flex justify-center items-center h-screen",children:[(0,n.jsx)(v.Z,{})," "]}):m?(0,n.jsx)("div",{className:"text-center text-red-500",children:m}):(0,n.jsx)("div",{children:(0,n.jsx)("div",{className:"overflow-auto w-[95%] mx-auto mt-6 border rounded-md h-full shadow-[0_0px_5px_0px_rgba(0,0,0,0.3)]",children:(0,n.jsx)("div",{className:"bg-white min-w-[600px]",children:(0,n.jsx)(f,{productsData:t})})})})}},45599:function(e,r,t){var n=t(57437),s=t(75519);r.Z=e=>{let{title:r,href:t,btnName:l}=e;return(0,n.jsxs)("div",{className:"flex justify-between items-center px-6 ",children:[(0,n.jsx)("h3",{className:"text-xl font-bold text-secondary",children:r}),(0,n.jsx)(s.Z,{variant:"contained",style:{backgroundColor:"#2FB261"},href:t,className:" text-white",children:l})]})}},85072:function(e,r,t){var n=t(57437),s=t(2265),l=t(38472),a=t(48024),o=t(48367),d=t(58292),c=t(87116),i=t(91326),h=t(92674),x=t(28027),m=t(86645),u=t(74691),b=t(68884),g=t(75519);let j=(0,a.ZP)(o.Z)(e=>{let{theme:r}=e;return{["&.".concat(d.Z.head)]:{color:r.palette.common.white},["&.".concat(d.Z.body)]:{fontSize:14}}}),p=(0,a.ZP)(c.Z)(e=>{let{theme:r}=e;return{"&:nth-of-type(odd)":{backgroundColor:r.palette.action.hover}}});r.Z=e=>{let{productsData:r}=e,[t,a]=(0,s.useState)(r),o=async(e,r)=>{try{let t=await l.Z.put("".concat("https://testingbackend.ceramicandfoodproducts.com","/order/changeStatus/").concat(e),{status:r});console.log("✅ Server response:",t.data),a(t=>t.map(t=>t.Id===e?{...t,status:r}:t))}catch(e){var t;console.error("❌ Error updating order status:",(null===(t=e.response)||void 0===t?void 0:t.data)||e.message)}},d=(e,r)=>{let t="Pending";if("Pending"===r)t="Delivered";else if("Delivered"===r)t="Completed";else if("Completed"===r)return;o(e,t)},f=e=>{o(e,"Deny")};return(0,n.jsx)(i.Z,{sx:{overflowY:"auto"},children:(0,n.jsx)(h.Z,{sx:{width:"100%",overflow:"auto"},component:x.Z,className:"!rounded-none",children:(0,n.jsxs)(m.Z,{"aria-label":"simple table",children:[(0,n.jsx)(u.Z,{className:"bg-dash-primary",children:(0,n.jsxs)(c.Z,{children:[(0,n.jsx)(j,{align:"center",className:"font-semibold text-xl border-r border-white",children:"Order ID"}),(0,n.jsx)(j,{align:"center",className:"font-semibold text-xl border-r border-white",children:"Customer Name"}),(0,n.jsx)(j,{align:"center",className:"font-semibold text-xl border-r border-white",children:"Phone"}),(0,n.jsx)(j,{align:"center",className:"font-semibold text-xl border-r border-white",children:"Product Name"}),(0,n.jsx)(j,{align:"center",className:"font-semibold text-xl border-r border-white",children:"Price"}),(0,n.jsx)(j,{align:"center",className:"font-semibold text-xl",children:"Date"}),(0,n.jsx)(j,{align:"center",className:"font-semibold text-xl",children:"Status"}),(0,n.jsx)(j,{align:"center",className:"font-semibold text-xl",children:"Actions"})]})}),(0,n.jsx)(b.Z,{children:t.map(e=>{var r,t,s;return(0,n.jsxs)(p,{children:[(0,n.jsx)(j,{component:"th",scope:"row",className:"border-r border-r-gray-200",children:(0,n.jsxs)("span",{className:"font-medium text-dash-primary",children:["#00",e.Id]})}),(0,n.jsx)(j,{align:"center",className:"border-r border-r-gray-200",children:null==e?void 0:null===(r=e.user)||void 0===r?void 0:r.name}),(0,n.jsx)(j,{align:"center",className:"border-r border-r-gray-200",children:null==e?void 0:null===(t=e.user)||void 0===t?void 0:t.phone}),(0,n.jsx)(j,{align:"center",className:"border-r border-r-gray-200",children:null==e?void 0:null===(s=e.products)||void 0===s?void 0:s.map((r,t)=>(0,n.jsxs)("span",{children:[r.name,t<e.products.length-1&&", "]},t))}),(0,n.jsx)(j,{align:"center",children:(0,n.jsxs)("span",{children:["$",(Number(null==e?void 0:e.totalAmount)||0).toFixed(2)]})}),(0,n.jsx)(j,{align:"center",children:new Date(null==e?void 0:e.date).toLocaleDateString()}),(0,n.jsx)(j,{align:"center",children:e.status||"Pending"}),(0,n.jsxs)(j,{align:"center",children:[(0,n.jsx)(g.Z,{variant:"contained",color:"primary",onClick:()=>d(e.Id,e.status),sx:{width:100,height:30,fontSize:"0.75rem"},children:"Completed"===e.status?"Done":"Delivered"===e.status?"Finish":(e.status,"Accept")}),(0,n.jsx)(g.Z,{variant:"contained",color:"secondary",onClick:()=>f(e.Id),sx:{mt:2,width:100,height:30,fontSize:"0.75rem"},children:"Delete"})]})]},e.Id)})})]})})})}}}]);